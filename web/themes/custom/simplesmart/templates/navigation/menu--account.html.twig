{#
/**
 * @file
 * Theme override for user account menu - only shows when authenticated.
 */
#}

{% if logged_in %}
  {% import _self as account_menu %}
  {{ account_menu.render_menu_tree(items, attributes, 0) }}

  {% macro render_menu_tree(items, attributes, menu_level) %}
    {% import _self as account_menu %}
    {% if items %}
      {% if menu_level == 0 %}
        <ul{{ attributes }}>
      {% else %}
        <ul>
      {% endif %}
      {% for item in items %}
        <li{{ item.attributes }}>
          {{ link(item.title, item.url) }}
          {% if item.below %}
            {{ account_menu.render_menu_tree(item.below, attributes, menu_level + 1) }}
          {% endif %}
        </li>
      {% endfor %}
      </ul>
    {% endif %}
  {% endmacro %}
{% endif %}